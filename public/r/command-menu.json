{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "command-menu",
  "type": "registry:ui",
  "title": "Command Menu",
  "description": "Spotlight-style command palette with search, groups, and keyboard shortcuts.",
  "dependencies": [
    "lucide-react"
  ],
  "registryDependencies": [],
  "files": [
    {
      "path": "components/ds/command-menu.tsx",
      "type": "registry:ui",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport { cn } from \"@/lib/utils\"\nimport { Search } from \"lucide-react\"\n\nexport interface CommandItem {\n  id: string\n  label: string\n  icon?: React.ReactNode\n  shortcut?: string\n  group?: string\n  onSelect: () => void\n}\n\ninterface CommandMenuProps extends React.HTMLAttributes<HTMLDivElement> {\n  items: CommandItem[]\n  placeholder?: string\n  open: boolean\n  onOpenChange: (open: boolean) => void\n}\n\nexport function CommandMenu({\n  className,\n  items,\n  placeholder = \"Type a command or search...\",\n  open,\n  onOpenChange,\n  ...props\n}: CommandMenuProps) {\n  const [query, setQuery] = React.useState(\"\")\n  const inputRef = React.useRef<HTMLInputElement>(null)\n\n  React.useEffect(() => {\n    if (open) {\n      setQuery(\"\")\n      setTimeout(() => inputRef.current?.focus(), 0)\n    }\n  }, [open])\n\n  React.useEffect(() => {\n    function handleKey(e: KeyboardEvent) {\n      if (e.key === \"k\" && (e.metaKey || e.ctrlKey)) {\n        e.preventDefault()\n        onOpenChange(!open)\n      }\n      if (e.key === \"Escape\" && open) {\n        onOpenChange(false)\n      }\n    }\n    document.addEventListener(\"keydown\", handleKey)\n    return () => document.removeEventListener(\"keydown\", handleKey)\n  }, [open, onOpenChange])\n\n  const filtered = items.filter((item) =>\n    item.label.toLowerCase().includes(query.toLowerCase())\n  )\n\n  const groups = Array.from(new Set(filtered.map((i) => i.group || \"Actions\")))\n\n  if (!open) return null\n\n  return (\n    <>\n      {/* Backdrop */}\n      <div\n        className=\"fixed inset-0 z-50 bg-black/50\"\n        onClick={() => onOpenChange(false)}\n        aria-hidden=\"true\"\n      />\n      {/* Dialog */}\n      <div\n        className={cn(\n          \"fixed left-1/2 top-1/2 z-50 w-full max-w-lg -translate-x-1/2 -translate-y-1/2 rounded-xl border border-border bg-popover shadow-2xl\",\n          className\n        )}\n        role=\"dialog\"\n        aria-label=\"Command menu\"\n        {...props}\n      >\n        {/* Search input */}\n        <div className=\"flex items-center gap-2 border-b border-border px-3\">\n          <Search className=\"size-4 shrink-0 text-muted-foreground\" />\n          <input\n            ref={inputRef}\n            value={query}\n            onChange={(e) => setQuery(e.target.value)}\n            placeholder={placeholder}\n            className=\"flex-1 bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground\"\n          />\n          <kbd className=\"hidden sm:inline-flex h-5 items-center gap-0.5 rounded border border-border bg-muted px-1.5 text-[10px] font-mono text-muted-foreground\">\n            ESC\n          </kbd>\n        </div>\n\n        {/* Results */}\n        <div className=\"max-h-72 overflow-y-auto p-1\">\n          {filtered.length === 0 ? (\n            <p className=\"py-6 text-center text-sm text-muted-foreground\">\n              No results found.\n            </p>\n          ) : (\n            groups.map((group) => (\n              <div key={group}>\n                <p className=\"px-2 py-1.5 text-xs font-medium text-muted-foreground\">\n                  {group}\n                </p>\n                {filtered\n                  .filter((i) => (i.group || \"Actions\") === group)\n                  .map((item) => (\n                    <button\n                      key={item.id}\n                      type=\"button\"\n                      onClick={() => {\n                        item.onSelect()\n                        onOpenChange(false)\n                      }}\n                      className=\"flex w-full items-center gap-2 rounded-md px-2 py-2 text-sm text-foreground transition-colors hover:bg-muted\"\n                    >\n                      {item.icon && (\n                        <span className=\"shrink-0 text-muted-foreground [&_svg]:size-4\">\n                          {item.icon}\n                        </span>\n                      )}\n                      <span className=\"flex-1 text-left\">{item.label}</span>\n                      {item.shortcut && (\n                        <kbd className=\"ml-auto text-[10px] font-mono text-muted-foreground\">\n                          {item.shortcut}\n                        </kbd>\n                      )}\n                    </button>\n                  ))}\n              </div>\n            ))\n          )}\n        </div>\n      </div>\n    </>\n  )\n}\n"
    }
  ]
}