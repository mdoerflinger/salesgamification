{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "user-menu",
  "type": "registry:ui",
  "title": "User Menu",
  "description": "Avatar dropdown user menu with profile, settings, and sign-out actions.",
  "dependencies": [
    "lucide-react"
  ],
  "registryDependencies": [],
  "files": [
    {
      "path": "components/ds/user-menu.tsx",
      "type": "registry:ui",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport { cn } from \"@/lib/utils\"\nimport { LogOut, Settings, User, ChevronsUpDown } from \"lucide-react\"\n\ninterface UserMenuProps extends React.HTMLAttributes<HTMLDivElement> {\n  name: string\n  email?: string\n  avatarUrl?: string\n  initials?: string\n  onProfile?: () => void\n  onSettings?: () => void\n  onSignOut?: () => void\n}\n\nexport function UserMenu({\n  className,\n  name,\n  email,\n  avatarUrl,\n  initials,\n  onProfile,\n  onSettings,\n  onSignOut,\n  ...props\n}: UserMenuProps) {\n  const [open, setOpen] = React.useState(false)\n  const ref = React.useRef<HTMLDivElement>(null)\n\n  React.useEffect(() => {\n    function handleClickOutside(e: MouseEvent) {\n      if (ref.current && !ref.current.contains(e.target as Node)) {\n        setOpen(false)\n      }\n    }\n    document.addEventListener(\"mousedown\", handleClickOutside)\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside)\n  }, [])\n\n  const fallback = initials || name.split(\" \").map((n) => n[0]).join(\"\").slice(0, 2).toUpperCase()\n\n  return (\n    <div ref={ref} className={cn(\"relative\", className)} {...props}>\n      <button\n        type=\"button\"\n        onClick={() => setOpen(!open)}\n        className=\"flex w-full items-center gap-3 rounded-lg p-2 text-left transition-colors hover:bg-muted\"\n      >\n        {avatarUrl ? (\n          <img\n            src={avatarUrl}\n            alt={name}\n            className=\"size-8 rounded-full object-cover\"\n          />\n        ) : (\n          <span className=\"flex size-8 items-center justify-center rounded-full bg-primary text-xs font-semibold text-primary-foreground\">\n            {fallback}\n          </span>\n        )}\n        <div className=\"flex-1 truncate\">\n          <p className=\"text-sm font-medium text-foreground truncate\">{name}</p>\n          {email && (\n            <p className=\"text-xs text-muted-foreground truncate\">{email}</p>\n          )}\n        </div>\n        <ChevronsUpDown className=\"size-4 text-muted-foreground shrink-0\" />\n      </button>\n\n      {open && (\n        <div className=\"absolute bottom-full left-0 z-50 mb-1 w-full min-w-[200px] rounded-lg border border-border bg-popover p-1 shadow-lg\">\n          {onProfile && (\n            <button\n              type=\"button\"\n              onClick={() => { onProfile(); setOpen(false) }}\n              className=\"flex w-full items-center gap-2 rounded-md px-2 py-1.5 text-sm text-foreground transition-colors hover:bg-muted\"\n            >\n              <User className=\"size-4\" />\n              Profile\n            </button>\n          )}\n          {onSettings && (\n            <button\n              type=\"button\"\n              onClick={() => { onSettings(); setOpen(false) }}\n              className=\"flex w-full items-center gap-2 rounded-md px-2 py-1.5 text-sm text-foreground transition-colors hover:bg-muted\"\n            >\n              <Settings className=\"size-4\" />\n              Settings\n            </button>\n          )}\n          {(onProfile || onSettings) && onSignOut && (\n            <div className=\"my-1 h-px bg-border\" />\n          )}\n          {onSignOut && (\n            <button\n              type=\"button\"\n              onClick={() => { onSignOut(); setOpen(false) }}\n              className=\"flex w-full items-center gap-2 rounded-md px-2 py-1.5 text-sm text-destructive transition-colors hover:bg-destructive/10\"\n            >\n              <LogOut className=\"size-4\" />\n              Sign out\n            </button>\n          )}\n        </div>\n      )}\n    </div>\n  )\n}\n"
    }
  ]
}